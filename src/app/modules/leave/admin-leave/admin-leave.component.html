<div class="container mt-4">

  <h2 class="mb-2">Admin Leave Dashboard</h2>
  <p class="text-muted mb-3">Manage employee leave requests</p>

  <!-- Summary Cards -->
  <div class="row mb-3">

    <div class="col-md-3 mb-3">
      <div class="card shadow-sm p-3 text-center small-card">
        <h6 class="mb-1">Total Requests</h6>
        <h4 class="fw-bold mb-0">{{ totalLeaves }}</h4>
      </div>
    </div>

    <div class="col-md-3 mb-3">
      <div class="card shadow-sm p-3 text-center bg-warning text-white small-card">
        <h6 class="mb-1">Pending</h6>
        <h4 class="fw-bold mb-0">{{ pendingCount }}</h4>
      </div>
    </div>

    <div class="col-md-3 mb-3">
      <div class="card shadow-sm p-3 text-center bg-success text-white small-card">
        <h6 class="mb-1">Approved</h6>
        <h4 class="fw-bold mb-0">{{ approvedCount }}</h4>
      </div>
    </div>

    <div class="col-md-3 mb-3">
      <div class="card shadow-sm p-3 text-center bg-danger text-white small-card">
        <h6 class="mb-1">Rejected</h6>
        <h4 class="fw-bold mb-0">{{ rejectedCount }}</h4>
      </div>
    </div>

  </div>

  <!-- Pending Requests -->
  <h5 class="mb-3 text-warning">New Leave Requests</h5>

  <div class="card shadow-sm p-3 mb-4">
    <div class="table-responsive">
      <table class="table table-bordered table-striped table-sm text-center align-middle compact-table">

        <thead class="table-dark">
          <tr>
            <th>Employee</th>
            <th>From</th>
            <th>To</th>
            <th>Reason</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let leave of leaveList"
              [hidden]="leave.status !== 'Pending'">

            <td>{{ leave.employeeName }}</td>
            <td>{{ leave.fromDate | date:'dd-MM-yyyy' }}</td>
            <td>{{ leave.toDate | date:'dd-MM-yyyy' }}</td>
            <td>{{ leave.reason }}</td>

            <td>
              <button class="btn btn-success btn-sm me-1"
                (click)="approve(leave.leaveId)">
                Approve
              </button>

              <button class="btn btn-danger btn-sm"
                (click)="reject(leave.leaveId)">
                Reject
              </button>
            </td>

          </tr>
        </tbody>

      </table>
    </div>
  </div>

  <!-- Processed Leaves -->
  <h5 class="mb-3">Processed Leaves</h5>

  <div class="card shadow-sm p-3"
       *ngIf="approvedCount > 0 || rejectedCount > 0">

    <div class="table-responsive">
      <table class="table table-bordered table-striped table-sm text-center align-middle compact-table">

        <thead class="table-dark">
          <tr>
            <th>Employee</th>
            <th>From</th>
            <th>To</th>
            <th>Reason</th>
            <th>Status</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let leave of leaveList"
              [hidden]="leave.status === 'Pending'">

            <td>{{ leave.employeeName }}</td>
            <td>{{ leave.fromDate | date:'dd-MM-yyyy' }}</td>
            <td>{{ leave.toDate | date:'dd-MM-yyyy' }}</td>
            <td>{{ leave.reason }}</td>

            <td>
              <span class="badge"
                [ngClass]="{
                  'bg-success': leave.status === 'Approved',
                  'bg-danger': leave.status === 'Rejected'
                }">
                {{ leave.status }}
              </span>
            </td>

          </tr>
        </tbody>

      </table>
    </div>

  </div>

</div>